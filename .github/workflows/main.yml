const login = require('@xaviabot/fca-unofficial');
const fs = require('fs');

// à¦¸à¦°à¦¾à¦¸à¦°à¦¿ à¦•à§‹à¦¡à§‡ à¦‡à¦®à§‡à¦‡à¦² à¦“ à¦ªà¦¾à¦¸à¦“à§Ÿà¦¾à¦°à§à¦¡ à¦¬à¦¸à¦¾à¦¨à§‹ à¦¹à§Ÿà§‡à¦›à§‡
const credentials = {
  email: "mdsabbira0011@gmail.com",
  password: "SABBIRVAI1122"
};

login(credentials, (err, api) => {
  if (err) {
    switch (err.error) {
      case 'login-approval':
        console.log("âš ï¸  Two-factor authentication enabled. Please approve the login.");
        break;
      default:
        console.error("âŒ Login Error:", err);
    }
    return;
  }

  console.log("âœ… Login Success");

  // Session file à¦¸à¦‚à¦°à¦•à§à¦·à¦£
  fs.writeFileSync('appstate.json', JSON.stringify(api.getAppState()));

  // à¦®à§‡à¦¸à§‡à¦œ à¦¶à§‹à¦¨à¦¾ à¦¶à§à¦°à§
  api.listenMqtt((err, message) => {
    if (err) return console.error("ğŸ”´ Listen Error:", err);
    console.log("ğŸ”” New Message:", message);
  });
});
