const login = require('@xaviabot/fca-unofficial'); // à¦…à¦¥à¦¬à¦¾ à¦†à¦ªà¦¨à¦¿ à¦¯à§‡à¦Ÿà¦¾ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦›à§‡à¦¨
const fs = require('fs');

const credentials = { email:mdsabbira0011@gmail.com process.env.FB_EMAIL, password:SABBIRVAI1122 process.env.FB_PASSWORD };

login(credentials, (err, api) => {
  if (err) {
    switch (err.error) {
      case 'login-approval':
        console.log("âš ï¸  Two-factor authentication enabled. Please approve the login.");
        break;
      default:
        console.error("âŒ Login Error:", err);
    }
    return;
  }

  console.log("âœ… Login Success");

  // Check if api or api.cv exists
  if (!api || !api.cv) {
    console.error("âŒ API object à¦¬à¦¾ à¦¤à¦¾à¦° cv property undefined");
    return;
  }

  // Save session
  fs.writeFileSync('appstate.json', JSON.stringify(api.getAppState()));

  api.listenMqtt((err, message) => {
    if (err) return console.error("Listen Error:", err);
    console.log("ğŸ”” New Message:", message);
  });
});
